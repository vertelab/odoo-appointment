<odoo>
  <template id="meeting_booking" name="Meeting booking">
    <t t-call="website.layout">
      <t t-set="head">
        <link href='/calendar_appointment/static/fullcalendar-4.1.0/packages/core/main.css' rel='stylesheet' />
        <link href='/calendar_appointment/static/fullcalendar-4.1.0/packages/daygrid/main.css' rel='stylesheet' />
        <link href='/calendar_appointment/static/fullcalendar-4.1.0/packages/timegrid/main.css' rel='stylesheet' />
        <link href='/calendar_appointment/static/fullcalendar-4.1.0/packages/list/main.css' rel='stylesheet' />
        <script src='/calendar_appointment/static/fullcalendar-4.1.0/packages/core/main.js' />
        <script src='/calendar_appointment/static/fullcalendar-4.1.0/packages/interaction/main.js' />
        <script src='/calendar_appointment/static/fullcalendar-4.1.0/packages/daygrid/main.js' />
        <script src='/calendar_appointment/static/fullcalendar-4.1.0/packages/timegrid/main.js' />
        <script src='/calendar_appointment/static/fullcalendar-4.1.0/packages/list/main.js' />
        <script>
          document.addEventListener('DOMContentLoaded', function() {
          var calendarEl = document.getElementById('calendar');
          
          var calendar = new FullCalendar.Calendar(calendarEl, {
          plugins: [ 'interaction', 'dayGrid', 'timeGrid', 'list' ],
          header: {
          left: 'prev,next today',
          center: 'title',
          right: 'dayGridMonth,timeGridWeek,timeGridDay,listWeek'
          },
          navLinks: true, // can click day/week names to navigate views
          
          weekNumbers: true,
          weekNumbersWithinDays: true,
          weekNumberCalculation: 'ISO',
          
          editable: true,
          eventLimit: true, // allow "more" link when too many events
          
          eventClick: function(event) {
          
          if (event.el.style.backgroundColor == 'green'){
          event.el.style.backgroundColor = '#3788d8';
          //removefromlist()
          }
          else{
          event.el.style.backgroundColor = 'green';
          
          var spotid = document.getElementsByName("spot_id")[0];
          spotid.value = event.event.id;
          var outputspots = document.getElementById("outputOfSpots");
          
          selectedSpots = [];
          selectedSpots.push(spotid);
          
          for (spot in selectedSpots) {
          outputspots.innerHTML += '<tr>'+spot+'</tr>';
          }
          }
          },
          
          events: [
          <t t-foreach="spots" t-as="spot">
            <t t-if="not spot.event_id">
              {
              title: 'Möte',
              id:
              <t t-esc="''''%s','''%spot.id" />
              start:
              <t t-esc="''''%s','''%spot.date_start_template_format()" />
              end: '2019-04-13'
              },
            </t>
          </t>
          ]
          });
          
          calendar.render();
          });

        </script>
        <style>
          body {
          margin: 40px 10px;
          padding: 0;
          font-family: Arial, Helvetica Neue, Helvetica, sans-serif;
          font-size: 14px;
          }
          
          #calendar {
          max-width: 900px;
          margin: 0 auto;
          }
          
          #selectedSpots {
          float: right;
          }

        </style>
      </t>
      <div id="calendar" />
      <div>
        <table class="table table-striped">
          <thead>
            <tr>
              <th>Valda tillfällen</th>
            </tr>
          </thead>
          <tbody id="outputOfSpots">
          </tbody>
          <tfoot>
            <tr>
              <form id="modalForm" action="/meeting/spot" method="POST">
                <input type="hidden" name="spot_id" />
                <input type="hidden" name="token" t-att-value="appointment.token" />
                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />
                <input type="hidden" name="attendee_id" t-att-value="partner.id" />
              </form>
              <button id="button_confirm" type="button" onclick="document.getElementById('modalForm').submit()" class="btn btn-success">Bekräfta</button>
            </tr>
          </tfoot>
        </table>
      </div>
    </t>
  </template>
</odoo>
