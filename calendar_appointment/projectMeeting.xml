<odoo>
  <template id="meeting_booking" name="Meeting booking">
    <t t-call="website.layout">
      <t t-set="head">
        <link href='/calendar_appointment/static/fullcalendar-4.1.0/packages/core/main.css' rel='stylesheet' />
        <link href='/calendar_appointment/static/fullcalendar-4.1.0/packages/daygrid/main.css' rel='stylesheet' />
        <link href='/calendar_appointment/static/fullcalendar-4.1.0/packages/timegrid/main.css' rel='stylesheet' />
        <link href='/calendar_appointment/static/fullcalendar-4.1.0/packages/list/main.css' rel='stylesheet' />
        <script src='/calendar_appointment/static/fullcalendar-4.1.0/packages/core/main.js' />
        <script src='/calendar_appointment/static/fullcalendar-4.1.0/packages/interaction/main.js' />
        <script src='/calendar_appointment/static/fullcalendar-4.1.0/packages/daygrid/main.js' />
        <script src='/calendar_appointment/static/fullcalendar-4.1.0/packages/timegrid/main.js' />
        <script src='/calendar_appointment/static/fullcalendar-4.1.0/packages/list/main.js' />
        <script>
			

			
          document.addEventListener('DOMContentLoaded', function() {
          var calendarEl = document.getElementById('calendar');
          
          selectedSpots = [];
          stringSelectedSpots = [];
          var outputspots = document.getElementById("outputOfSpots");
          
          var spotIds = document.getElementsByName("spot_ids")[0]; 
          
          
          var calendar = new FullCalendar.Calendar(calendarEl, {
          plugins: [ 'interaction', 'dayGrid', 'timeGrid', 'list' ],
          header: {
          left: 'prev,next today',
          center: 'title',
          right: 'dayGridMonth,timeGridWeek,timeGridDay,listWeek'
          },
          navLinks: true, // can click day/week names to navigate views
          
          weekNumbers: true,
          weekNumbersWithinDays: true,
          weekNumberCalculation: 'ISO',
          
          editable: true,
          eventLimit: true, // allow "more" link when too many events
          
          eventClick: function(event) {
          
          if (event.el.style.backgroundColor == 'green'){
          
          selectedSpots.splice(selectedSpots.indexOf(event.event.id),1);
          stringSelectedSpots.splice(stringSelectedSpots.indexOf(event.event.id), 1);
          
          spotIds = stringSelectedSpots.join()
          
          
          outputspots.innerHTML = ' '
          for (spot in selectedSpots) {
			 outputspots.innerHTML += '<tr>'+ selectedSpots[spot].startdate + " - " + selectedSpots[spot].enddate +'</tr>';
          }
          
          
          event.el.style.backgroundColor = '#3788d8';
          }
          else{
          thisEvent = {id : event.event.id, startdate : event.event.start, enddate : event.event.end}
          selectedSpots.push(thisEvent);
          stringSelectedSpots.push(thisEvent.id);
          
          spotIds = stringSelectedSpots.join()
		  alert(spotIds)
		  


          outputspots.innerHTML = ' '
          
          
          
          
		  for (spot in selectedSpots) {
		  outputspots.innerHTML += '<tr>'+ selectedSpots[spot].startdate + " - " + selectedSpots[spot].enddate +'</tr>';
	      }
          

          
          event.el.style.backgroundColor = 'green';
          
          }
          
          },
          
          events: [
          <t t-foreach="spots" t-as="spot">
            <t t-if="not spot.event_id">
              {
                title: 
              <t t-esc="''''%s','''%spot.name"/>
              id:
              <t t-esc="''''%s','''%spot.id" />
              start:
              <t t-esc="''''%s','''%spot.date_start_template_format()" />
              end:
              <t t-esc="''''%s','''%spot.date_end_template_format()"/>
              },
            </t>
          </t>
          ]
          });
          
          calendar.render();
          });

        </script>
        <style>
          body {
          margin: 40px 10px;
          padding: 0;
          font-family: Arial, Helvetica Neue, Helvetica, sans-serif;
          font-size: 14px;
          }
          
          #calendar {
          max-width: 900px;
          margin: 0 auto;
          }
          
          #selectedSpots {
          float: right;
          }

        </style>
      </t>
      <div id="calendar" />
      <div>
        <table class="table table-striped">
          <thead>
            <tr>
              <th>Valda tillfällen</th>
            </tr>
          </thead>
          <tbody id="outputOfSpots">
          </tbody>
          <tfoot>
            <tr>
              <form id="modalForm" action="/meeting/spot" method="POST">
                <input type="hidden" name="spot_ids" />
                <input type="hidden" name="token" t-att-value="appointment.token" />
                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />
                <input type="hidden" name="attendee_id" t-att-value="partner.id" />
              </form>
              <button id="button_confirm" type="button" onclick="document.getElementById('modalForm').submit()" class="btn btn-success">Bekräfta</button>
            </tr>
          </tfoot>
        </table>
      </div>
    </t>
  </template>
   <template id="confirmed_booking">
    <p>Booking confirmation</p>
  </template>
</odoo>
